#!/bin/bash
#
# Description: ENTRYPOINT for running Docker Images in Containers

# Use this file for customizing the default behavior when a container is created

set -e
BUILD_TIME=`date +'%y.%m.%d %H:%M:%S'`

echo "BUILD_TIME: $BUILD_TIME"
echo "BUILD_TYPE: $BUILD_TYPE"
echo "BUILD_VER: $BUILD_VER"

nginx -t

if [ "$BUILD_TYPE" == "development" ]; then
    nginx -g 'daemon off;' & 
    npm run start
else
    sed -i "s/443/${PORT}/g" /etc/nginx/nginx.conf && \
    nginx -g "daemon off;"
fi
